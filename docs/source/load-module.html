<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*global MTVNPlayer, Config, _*/
var PackageManager = function() {
    function provideJQuery() {
        // provide $ if it's on the window
        if (!MTVNPlayer.has(&quot;$&quot;)) {
            var $ = window.jQuery;
            // TODO we can lower this version if we want to test first.
            if ($ &amp;&amp; Config.versionIsMinimum(&quot;1.9.0&quot;, $.fn.jquery)) {
                MTVNPlayer.provide(&quot;$&quot;, $);
            }
        }
    }
    var Events = {
        ENDSLATE: &quot;endslate&quot;
    },
    moduleBase = &quot;http://media.mtvnservices.com/player/api/module/&quot;,
        endslatePackages = {
            &quot;$&quot;: {
                shim: true,
                url: &quot;http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;
            },
            &quot;mtvn-util&quot;: moduleBase + &quot;mtvn-util/latest/mtvn-util.min.js&quot;,
            &quot;endslate-css&quot;: moduleBase + &quot;endslate/latest/style.css&quot;,
            &quot;endslate&quot;: moduleBase + &quot;endslate/latest/endslate.min.js&quot;
        },
        createEndslate = function(event) {
            provideJQuery();
            var player = event.target,
                packages = player.config.module || {};
            MTVNPlayer.loadPackages(_.extend(endslatePackages, packages.endslate), function() {
                new(MTVNPlayer.require(&quot;endslate&quot;))({
                    config: event.data,
                    player: player
                });
            });
        };
    MTVNPlayer.onPlayer(function(player) {
        // hook into endslate events for all players
        player.bind(PackageManager.Events.ENDSLATE, createEndslate);
    });
    // Exports
    return {
        Events: Events
    };
}();</pre>
</body>
</html>
